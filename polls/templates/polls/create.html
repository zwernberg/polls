{% extends 'polls/base.html' %}

<head>

</head>
{% block content %}
<form action="" method="post">
    {% csrf_token %} {{ form.as_p }} {{ choice_form.management_form }} {{ choice_form.non_form_errors }}
    <div id="choice-forms-container">
        {% for form in choice_form %} {{ form.id }}
        <div class="inline {{ choice_form.prefix }}">
            {{ form.choice_text.errors }} {{ form.choice_text.label_tag }} {{ form.choice_text }}
        </div>
        {% endfor %}
    </div>
<div id="empty_form" style="display:none">
            <div class="inline {{ choice_form.prefix }}">

        {{ choice_form.empty_form }}
            </div>
</div>
    <input type="submit" class="btn btn-primary" value="Create" />
    <a href="#" id="add_more" class="btn btn-info add-item">Add Item</a>

</form>

<script>
    $('#add_more').click(function() {
        var form_idx = $('#id_choice_set-TOTAL_FORMS').val();
        $('#choice-forms-container').append($('#empty_form').html().replace(/__prefix__/g, form_idx));
        $('#id_choice_set-TOTAL_FORMS').val(parseInt(form_idx) + 1);
    });
</script>

{% endblock %}